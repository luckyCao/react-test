{"version":3,"sources":["playground.js"],"names":[],"mappings":"AAAA,MAAM,aAAa,MAAnB;AACA,SAAS,SAAT,CAAmB,KAAnB,EAAyB;AACrB;AACA,QAAI,QAAQ,MAAM,KAAlB;AACA,QAAI,OAAO,IAAX;AACA,QAAG,CAAC,KAAJ,EAAU;AACN,eAAO,SAAS,cAAT,CAAwB,KAAxB,CAAP;AACH,KAFD,MAGK,IAAG,SAAS,CAAZ,EAAc;AACf,eAAO,aAAa,KAAb,CAAP;AACH,KAFI,MAGA,IAAG,SAAS,CAAZ,EAAc;AACf,eAAO,eAAe,KAAf,CAAP;AACH;AACD,WAAO,IAAP;AACH;;AAED,SAAS,YAAT,CAAsB,KAAtB,EAA4B;AACxB;AACA,QAAI,OAAO,MAAM,IAAjB;AACA,QAAI,WAAW,MAAM,KAAN,CAAY,QAA3B;AACA,QAAI,OAAO,SAAS,aAAT,CAAuB,IAAvB,CAAX;AACA,QAAI,QAAQ,MAAM,KAAlB;AACA,aAAS,IAAT,EAAc,KAAd;;AAEA,QAAG,EAAE,oBAAoB,KAAtB,CAAH,EAAgC;AAC5B,mBAAW,CAAC,QAAD,CAAX;AACH;AACD,QAAI,SAAS,SAAS,MAAtB;AACA,SAAI,IAAI,IAAE,CAAV,EAAY,IAAE,MAAd,EAAqB,GAArB,EAAyB;AACrB,aAAK,WAAL,CAAiB,UAAU,SAAS,CAAT,CAAV,CAAjB;AACH;AACD,WAAO,IAAP;AACH;;AAED,SAAS,cAAT,CAAwB,KAAxB,EAA8B;AAC1B,QAAI,YAAY,MAAM,IAAtB;AACA,QAAI,YAAY,IAAI,SAAJ,CAAc,MAAM,KAApB,CAAhB;AACA,QAAI,cAAc,UAAU,MAAV,EAAlB;;AAEA,WAAO,UAAU,WAAV,CAAP;AACH;;AAED,SAAS,QAAT,CAAkB,IAAlB,EAAuB,KAAvB,EAA6B;AACzB,SAAI,IAAI,IAAR,IAAgB,KAAhB,EAAsB;AAClB,YAAG,QAAQ,UAAX,EAAsB;AAClB;AACH;AACD,YAAG,WAAW,IAAX,CAAgB,IAAhB,CAAH,EAAyB;AACrB,qBAAS,IAAT,EAAc,MAAM,IAAN,CAAd,EAA0B,IAA1B;AACH;AACJ;AACJ;AACD,SAAS,QAAT,CAAkB,IAAlB,EAAuB,KAAvB,EAA6B,GAA7B,EAAiC;AAC7B,QAAI,aAAa,KAAK,UAAL,GAAgB,KAAK,UAArB,GAAgC,EAAjD;AACA,QAAI,QAAS,IAAI,OAAJ,CAAY,MAAZ,EAAmB,EAAnB,EAAuB,iBAAvB,EAAb;AACA,eAAW,KAAX,IAAoB,KAApB;AACA,SAAK,UAAL,GAAkB,UAAlB;AACA,aAAS,gBAAT,CAA0B,KAA1B,EAAgC,aAAhC;AACH;AACD,SAAS,aAAT,CAAuB,CAAvB,EAAyB;AACrB,QAAI,SAAS,EAAE,MAAf;AACA,QAAI,QAAQ,EAAE,IAAd;AACA,WAAM,MAAN,EAAa;AACT,YAAI,aAAa,OAAO,UAAxB;AACA,YAAG,cAAc,WAAW,KAAX,CAAjB,EAAmC;AAC/B,uBAAW,KAAX;AACH;AACD,iBAAS,OAAO,UAAhB;AACH;AACJ;;AAID,SAAQ,SAAR","file":"playground-compiled.js","sourcesContent":["const EVENT_KEYS = /^on/i;\nfunction initVnode(vNode){\n    //return document.createTextNode('null');\n    let vtype = vNode.vtype;\n    let node = null;\n    if(!vtype){\n        node = document.createTextNode(vNode);\n    }\n    else if(vtype == 2){\n        node = initVelement(vNode);\n    }\n    else if(vtype == 3){\n        node = initVcomponent(vNode);\n    }\n    return node;\n}\n\nfunction initVelement(vNode){\n    //return document.createTextNode('null');\n    let type = vNode.type;\n    let children = vNode.props.children;\n    let node = document.createElement(type);\n    let props = vNode.props\n    setProps(node,props);\n\n    if(!(children instanceof Array)){\n        children = [children]\n    }\n    let length = children.length;\n    for(var i=0;i<length;i++){\n        node.appendChild(initVnode(children[i]));\n    }\n    return node;\n}\n\nfunction initVcomponent(vNode){\n    let Component = vNode.type;\n    let component = new Component(vNode.props);\n    let virtualNode = component.render();\n\n    return initVnode(virtualNode);\n}\n\nfunction setProps(node,props){\n    for(let prop in props){\n        if(prop == 'children'){\n            return;\n        }\n        if(EVENT_KEYS.test(prop)){\n            setEvent(node,props[prop],prop)\n        }\n    }\n}\nfunction setEvent(node,event,key){\n    let eventStore = node.eventStore?node.eventStore:{};\n    let eType =  key.replace(/^on/i,'').toLocaleLowerCase();\n    eventStore[eType] = event;\n    node.eventStore = eventStore;\n    document.addEventListener(eType,dispatchEvent);\n}\nfunction dispatchEvent(e){\n    let target = e.target;\n    let eType = e.type;\n    while(target){\n        let eventStore = target.eventStore;\n        if(eventStore && eventStore[eType]){\n            eventStore[eType]();\n        }\n        target = target.parentNode;\n    }\n}\n\n\n\nexport {initVnode};"]}