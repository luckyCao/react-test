{"version":3,"sources":["props.js"],"names":[],"mappings":"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","file":"props-compiled.js","sourcesContent":["import {addEvent} from './event'\nimport {HTML_KEY,EVENT_KEYS,ATTRIBUTE_NAME_CHAR} from './constants'\n\nvar isCustomAttribute = RegExp.prototype.test.bind(new RegExp('^(data|aria)-[' + ATTRIBUTE_NAME_CHAR + ']*$'));\n\nvar setProp = function setProp(elem, key, value) {\n    if (key === 'children') {\n        return;\n    }\n    var originalKey = key;\n\n    if (EVENT_KEYS.test(key)) {\n        addEvent(elem, key, value);\n    }\n};\nvar setProps = function setProps(elem, props) {\n    for (var key in props) {\n        if (props.hasOwnProperty(key)) {\n            setProp(elem, key, props[key]);\n        }\n    }\n};\n\nfunction patchProps(elem, props, newProps, isCustomComponent) {\n    for (var key in props) {\n        if (key !== 'children') {\n            if (newProps.hasOwnProperty(key)) {\n                patchProp(elem, key, newProps[key], props[key], isCustomComponent);\n            } else {\n                removeProp(elem, key, props[key], isCustomComponent);\n            }\n        }\n    }\n    for (var key in newProps) {\n        if (key !== 'children' && !props.hasOwnProperty(key)) {\n            setProp(elem, key, newProps[key], isCustomComponent);\n        }\n    }\n}\n\nfunction patchProp(elem, key, value, oldValue, isCustomComponent) {\n    if (key === 'value' || key === 'checked') {\n        oldValue = elem[key];\n    }\n    if (value === oldValue) {\n        return;\n    }\n    if (value === undefined) {\n        removeProp(elem, key, oldValue, isCustomComponent);\n        return;\n    }\n    setProp(elem, key, value, isCustomComponent);\n}\n\nfunction removeProp(elem, key, oldValue, isCustomComponent) {\n    if (EVENT_KEYS.test(key)) {\n        removeEvent(elem, key);\n    }  else if (key === HTML_KEY) {\n        elem.innerHTML = '';\n    } else if (isCustomComponent) {\n        elem.removeAttribute(key);\n    } else {\n        removePropValue(elem, key);\n    }\n}\n\nfunction removePropValue(node, name) {\n    var propInfo = properties.hasOwnProperty(name) && properties[name];\n    if (propInfo) {\n        if (propInfo.mustUseProperty) {\n            var propName = propInfo.propertyName;\n            if (propInfo.hasBooleanValue) {\n                node[propName] = false;\n            } else {\n                // dom.value accept string value has side effect\n                if (propName !== 'value' || '' + node[propName] !== '') {\n                    node[propName] = '';\n                }\n            }\n        } else {\n            node.removeAttribute(propInfo.attributeName);\n        }\n    } else if (isCustomAttribute(name)) {\n        node.removeAttribute(name);\n    }\n}\n\n\nexport {setProps,patchProps}"]}