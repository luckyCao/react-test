{"version":3,"sources":["element.js"],"names":[],"mappings":"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","file":"element-compiled.js","sourcesContent":["import {setProps} from './props'\nimport {pendingComponents} from './component'\nlet jsdom;\nif (!process.env.BROWSER) {\n  jsdom = require('jsdom').jsdom;\n}\nlet doc = (jsdom?jsdom(\"<html></html>\"):document);\n\nfunction initVnode(vnode, parentContext, namespaceURI) {\n    var vtype = vnode.vtype;\n\n    var node = null;\n    if (!vtype) {\n        // init text\n        node = doc.createTextNode(vnode);\n    } else if (vtype === 2) {\n        // init element\n        node = initVelem(vnode, parentContext, namespaceURI);\n    }else if (vtype === 4) {\n        // init state component\n        node = initVcomponent(vnode, parentContext, namespaceURI);\n    }\n    return node;\n}\n\nfunction initVcomponent(vcomponent, parentContext, namespaceURI) {\n    var Component = vcomponent.type;\n    var props = vcomponent.props;\n\n    var component = new Component(props);\n    var updater = component.$updater;\n    var cache = component.$cache;\n\n    updater.isPending = true;\n    component.props = component.props || props;\n    component.context = component.context || componentContext;\n    if (component.componentWillMount) {\n        component.componentWillMount();\n        component.state = updater.getState();\n    }\n    var vnode = renderComponent(component);\n    var node = initVnode(vnode);\n    cache.vnode = vnode;\n    cache.node = node;\n    cache.isMounted = true;\n    pendingComponents.push(component);\n    return node;\n}\n\nfunction renderComponent(component, parentContext) {\n    var vnode = component.render();\n    return vnode;\n}\n\nfunction initVelem(velem, parentContext, namespaceURI) {\n    var type = velem.type;\n    var props = velem.props;\n\n    var node = null;\n    node = doc.createElement(type);\n\n    initVchildren(velem, node, parentContext);\n    setProps(node, props);\n    return node;\n}\n\nfunction initVchildren(velem, node, parentContext) {\n    var tempChild = velem.props.children;\n    if(!(tempChild instanceof  Array)){\n        tempChild = [tempChild];\n    }\n    var vchildren = node.vchildren = tempChild;\n    var namespaceURI = node.namespaceURI;\n    for (var i = 0, len = vchildren.length; i < len; i++) {\n        node.appendChild(initVnode(vchildren[i], parentContext, namespaceURI));\n    }\n}\n\nfunction createElement(type, props, children) {\n    var vtype = null;\n    if (typeof type === 'string') {\n        vtype = 2;\n    }\n    else if (typeof type === 'function') {\n        vtype = 4;\n    }\n    var key = null;\n    var ref = null;\n    var finalProps = {};\n    if (props != null) {\n        for (var propKey in props) {\n            if (!props.hasOwnProperty(propKey)) {\n                continue;\n            }\n            if (propKey === 'key') {\n                if (props.key !== undefined) {\n                    key = '' + props.key;\n                }\n            } else if (propKey === 'ref') {\n                if (props.ref !== undefined) {\n                    ref = props.ref;\n                }\n            } else {\n                finalProps[propKey] = props[propKey];\n            }\n        }\n    }\n\n    var defaultProps = type.defaultProps;\n\n    if (defaultProps) {\n        for (var propKey in defaultProps) {\n            if (finalProps[propKey] === undefined) {\n                finalProps[propKey] = defaultProps[propKey];\n            }\n        }\n    }\n\n    var argsLen = arguments.length;\n    var finalChildren = children;\n\n    if (argsLen > 3) {\n        finalChildren = Array(argsLen - 2);\n        for (var i = 2; i < argsLen; i++) {\n            finalChildren[i - 2] = arguments[i];\n        }\n    }\n\n    if (finalChildren !== undefined) {\n        finalProps.children = finalChildren;\n    }\n\n    return createVnode(vtype, type, finalProps, key, ref);\n}\n\nfunction createVnode(vtype, type, props, key, ref) {\n    var vnode = {\n        vtype: vtype,\n        type: type,\n        props: props,\n        key: key,\n        ref: ref\n    };\n\n    return vnode;\n}\n\nexport {createElement,initVnode,renderComponent}"]}