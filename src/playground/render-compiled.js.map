{"version":3,"sources":["render.js"],"names":[],"mappings":"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","file":"render-compiled.js","sourcesContent":["const IS_EVENT = /^on/i\n\nfunction render(vnode,container){\n    var node = renderTreeIntoContainer(vnode,container);\n}\n\nfunction renderTreeIntoContainer(vnode, container) {\n    var node = initVnode(vnode)\n    container.appendChild(node);\n}\n\nfunction initVnode(vnode){\n    var node = null;\n    var vtype = vnode.vtype;\n    if(!vtype){\n        node = document.createTextNode(vnode);\n    }\n    else if(vtype === 2){\n        node = initVelem(vnode);\n    }\n    else if(vtype === 4){ //component\n        node = initVcomponent(vnode);\n    }\n    return node;\n}\n\nfunction initVelem(vnode){\n    var type = vnode.type,\n        tempChild = vnode.props.children;\n    var node = document.createElement(type);\n    if(!(tempChild instanceof Array)){\n        tempChild = [tempChild];\n    }\n\n    for(var i=0;i<tempChild.length;i++){\n        node.appendChild(initVnode(tempChild[i]));\n    }\n\n    //设置props\n    setProps(node,vnode.props);\n    return node;\n}\n\nfunction initVcomponent(vnode){\n    var Component = vnode.type;\n    var component = new Component();\n    component.props = vnode.props;\n    var vnode = component.render();\n    var node = initVnode(vnode);\n    return node;\n}\n\nfunction setProps(node,props){\n    for(var prop in props){\n        setProp(node,prop,props[prop]);\n    }\n}\nfunction setProp(node,prop,content){\n    if(prop == 'children'){\n        return;\n    }\n    if(IS_EVENT.test(prop)){\n        setEvent(node,prop,content);\n    }\n}\n\nfunction setEvent(node,key,content){\n    var eType = key.replace(IS_EVENT,'').toLowerCase();\n    document.addEventListener(eType,eventDispatcher);\n    //把真正的回调放在\n    var eventStore = node.eventStore || {};\n    eventStore[eType] = content;\n\n    node.eventStore = eventStore;\n}\n\nfunction eventDispatcher(e){\n    var path = e.path,\n        index = 0,\n        target = path[index],\n        type = e.type;\n    while(target){\n        if(target.eventStore && target.eventStore[type]){\n            let listener = target.eventStore[type];\n            listener.call(this);\n        }\n        target = path[++index];\n    }\n\n}\n\nexport default render;"]}